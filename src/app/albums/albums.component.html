<app-search (searchChanged)=" onSearchChanged($event)"></app-search>

<div class="container">
      <!-- Pagination -->
      <ul class="pagination z-0">
            <li class="page-item z-0" (click)="onPageChange(currentPage - 1)">
                  <button class="page-link" href="#" [disabled]="currentPage === 1">Previous</button>
            </li>
            <li class="page-item z-0" *ngFor="let pageNumber of getPageNumbers()">
                  <a class="page-link" href="#" [class.active]="pageNumber === currentPage"
                        (click)="onPageChange(pageNumber)">
                        {{ pageNumber }}
                  </a>
            </li>
            <li class="page-item z-0" (click)="onPageChange(currentPage + 1)">
                  <button class="page-link" href="#" [disabled]="currentPage === totalPages">Next</button>
            </li>
      </ul>
</div>

<div class="row content">

      <div class="col-sm-4 pt-4 video">
            <!-- onPlay méthode enfant et playParent méthode parent -->
            <app-album-details [album]="selectedAlbum" (onPlay)="playParent($event)"></app-album-details>
            <!-- AlbumDetails communication parent vers enfant -->
      </div>

      <div class="col-sm-8">

            <h1 class="fs-1 fw-bold text-white mt-4 pt-0 position-relative">{{ titlePage }}
                  <button type="button"
                        class="float-end border-0 rounded shadow w3-blue position-relative fw-bold fs-5 px-4 py-2">
                        Albums <span
                              class="position-absolute top-0 start-100 translate-middle badge rounded-pill w3-red px-3 py-2">
                              {{
                              paginatedAlbums.length }}
                        </span>
                  </button>
            </h1>

            <!-- la div card qui permet d'afficher la liste des différentes albums -->
            <ng-container *ngIf="paginatedAlbums.length; else noAlbumsFound">
                  <div class="card shadow-lg mb-5 bg-body-tertiary w3-white border-0"
                        *ngFor="let album of paginatedAlbums">

                        <div class="card-header w3-blue text-light fs-5 fw-bold py-4">
                              {{album.ref}}
                        </div>
                        <div class="card-body mb-5">
                              <h1 *ngIf="album.status ==='on' " class="w3-text-red fw-bold fs-4">
                                    <span class="fas fa-pause-circle"></span>
                                    {{ album.title }}
                              </h1>
                              <h1 *ngIf="album.status !=='on' " class="w3-text-red fw-bold fs-4">
                                    <span class="fas fa-play-circle"></span>
                                    {{ album.title }}
                              </h1>
                              <div class="mb-3 detailsLink">
                                    <a class="card-title fw-semibold fs-5 d-block py-2"
                                          routerLink="/album/{{album.id}}">{{album.title}}</a>
                              </div>
                              <p class="card-text">{{album.description}}</p>
                              <ul class="list-group list-group-horizontal py-1 col-sm-3 fw-bold"
                                    style="font-size: 1rem;">
                                    <li class="list-group-item list-group-item-action w3-red badge mx-1 rounded border-0"
                                          *ngFor="let tag of album.tags"> {{tag}}
                                    </li>
                              </ul>
                              <div class="pt-3">
                                    <a class="btn btn-outline-dark fw-semibold px-4 py-2 border-3" href="#"
                                          role="button">En</a>
                                    <img class="glyph-icon mx-1 img-fluid" width="20px" height="auto"
                                          src="../assets/svg/si-glyph-heart.svg" />
                                    <small>{{album.like}}</small>
                                    <img class="glyph-icon mx-1 img-fluid" width="20px" height="auto"
                                          src="../assets/svg/si-glyph-timer.svg" />
                                    <small class="fw-semibold">{{album.duration}} min</small>
                                    <a class="w3-button w3-red rounded fw-semibold px-4 mx-2" role="button"
                                          (click)="onSelect(album)">Details</a>
                              </div>

                        </div>
                  </div>
            </ng-container>
            <ng-template #noAlbumsFound class="position-relative">
                  <div class="alert alert-dark list-group d-flex align-items-center message">
                        <strong class="fs-5 d-flex align-items-center mx-4 notif"><i class="fas fa-exclamation-triangle fa-4x"></i> {{ messageAlert }}</strong>
                  </div>
            </ng-template>
            <!-- end div albums -->
      </div>
</div>